{"ast":null,"code":"import apiCall from './api-call';\nexport default class User {\n  constructor(id = 0, email = null, name = null, role = 'User', roleId = 0, password = null) {\n    this.id = id;\n    this.email = email;\n    this.password = password;\n    this.roleId = roleId;\n  }\n  getUserRoles() {\n    const operation = 'getUserRoles';\n    const query = `query ${operation} {${operation} {Id Role Error}}`;\n    return apiCall(operation, query).then(res => {\n      return res;\n    }, err => console.error({\n      err\n    }));\n  }\n  getUserRestrictions(roleId) {\n    const operation = 'getUserRestrictions';\n    const query = `query ${operation}($roleId: Int!) {${operation}(roleId: $roleId) {Id Role RestrictedPages RestrictedActions Error}}`;\n    const variables = {\n      roleId\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => console.error(err));\n  }\n  getAllUsers() {\n    const operation = 'users';\n    const query = `query ${operation} {${operation} {Id Name Email Role RoleId, DateRegistered LastLogin LoggedIn FailedAttempts Active Error}}`;\n    return apiCall(operation, query).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  getUserById() {\n    const operation = 'userById';\n    const query = `query ${operation}($id: ID!) {${operation}(id: $id) {Id Email Name Role DateRegistered LastLogin LoggedIn FailedAttempts Error}}`;\n    const variables = {\n      id: this.id\n    };\n    return apiCall(operation, query, variables).then(res => {\n      if (res) {\n        if (res.data) {\n          const r = res.data[operation];\n          this.id = r.Id;\n          this.name = r.Name;\n          this.email = r.Email;\n          this.role = r.Role;\n          this.dateRegistered = r.DateRegistered;\n          this.lastLogin = r.LastLogin;\n          this.loggedIn = r.LoggedIn;\n          this.failedAttempts = r.FAiledAttemps;\n          this.error = r.Error;\n          return res.data[operation];\n        } else if (res.name) return res.message;\n      }\n    }, err => {\n      console.error(err);\n    });\n  }\n  getUserByEmail() {\n    const operation = 'userByEmail';\n    const query = `query ${operation}($email: String!) {${operation}(email: $email) {Id, LastLogin, Active}}`;\n    const variables = {\n      email: this.email\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  getAllUsersSansToken() {\n    const operation = 'usersSansToken';\n    const query = `query users {users {Id Error}}`;\n    return apiCall(operation, query).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  deleteUser(query, ids) {\n    const operation = query;\n    query = `mutation ${operation}($ids: [ID]!) {${operation}(ids: $ids) {Id}}`;\n    const variables = {\n      ids: ids\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => {\n      return err;\n    });\n  }\n  updateUser(operation, id, column, value) {\n    const query = `mutation ${operation}($id: ID!, $column: String!, $newValue: String!) {${operation}(id: $id, column: $column, newValue: $newValue) {${column} Error}}`;\n    const variables = {\n      id: id,\n      column: column,\n      newValue: value\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => {\n      return err;\n    });\n  }\n  signIn() {\n    const operation = 'signin';\n    const query = `mutation ${operation}($id: ID!, $password: String!) {${operation}(id: $id, password: $password) {Id Name Role RoleId LastLogin Error}}`;\n    const variables = {\n      id: this.id,\n      password: this.password\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  signUp() {\n    const operation = 'signup';\n    const query = `mutation ${operation}($email: String!, $usersName: String!, $password: String!, $role: Int!) {${operation}(email: $email, usersName: $usersName, password: $password, role: $role) {Id Message Error}}`;\n    const variables = {\n      email: this.email,\n      usersName: this.name,\n      password: this.password,\n      role: this.role\n    };\n    return apiCall(operation, query, variables).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  signOut() {\n    const operation = 'signout';\n    const mutation = `mutation ${operation} {${operation} {Id, Name, Error}}`;\n    return apiCall(operation, mutation).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n  changePassword(firstSignin) {\n    const operation = 'changePassword';\n    const mutation = `mutation ${operation}($id: ID!, $password: String!, $firstSignin: Boolean!) {${operation}(id: $id, password: $password, firstSignin: $firstSignin) {Id Name Role RoleId LastLogin Error}}`;\n    const variables = {\n      id: this.id,\n      password: this.password,\n      firstSignin\n    };\n    return apiCall(operation, mutation, variables).then(res => {\n      return res;\n    }, err => {\n      console.error({\n        err\n      });\n    });\n  }\n}","map":{"version":3,"names":["apiCall","User","constructor","id","email","name","role","roleId","password","getUserRoles","operation","query","then","res","err","console","error","getUserRestrictions","variables","getAllUsers","getUserById","data","r","Id","Name","Email","Role","dateRegistered","DateRegistered","lastLogin","LastLogin","loggedIn","LoggedIn","failedAttempts","FAiledAttemps","Error","message","getUserByEmail","getAllUsersSansToken","deleteUser","ids","updateUser","column","value","newValue","signIn","signUp","usersName","signOut","mutation","changePassword","firstSignin"],"sources":["/Users/rhead/Coding/campswim/dashboard/dashboard-ncompass/src/hooks/get-user.js"],"sourcesContent":["import apiCall from './api-call';\n\nexport default class User {\n  id;\n  email;\n  password;\n  name;\n  role;\n  roleId;\n  dateRegistered;\n  lastLogin;\n  loggedIn;\n  failedAttempts;\n  error;\n\n  constructor(id = 0, email = null, name = null, role = 'User', roleId = 0, password = null) {\n    this.id = id;\n    this.email = email;\n    this.password = password;\n    this.roleId = roleId;\n  };\n\n  getUserRoles() {\n    const operation = 'getUserRoles';\n    const query = `query ${operation} {${operation} {Id Role Error}}`;\n    return apiCall(operation, query).then(\n      res => { return res; },\n      err => console.error({err})\n    );\n  };\n\n  getUserRestrictions(roleId) {\n    const operation = 'getUserRestrictions';\n    const query = `query ${operation}($roleId: Int!) {${operation}(roleId: $roleId) {Id Role RestrictedPages RestrictedActions Error}}`;\n    const variables = { roleId };\n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => console.error(err)\n    );\n  };\n\n  getAllUsers() {\n    const operation = 'users';\n    const query = `query ${operation} {${operation} {Id Name Email Role RoleId, DateRegistered LastLogin LoggedIn FailedAttempts Active Error}}`;\n    return apiCall(operation, query).then(\n      res => { return res; },\n      err => { console.error({err}) }\n    );\n  };\n\n  getUserById() {\n    const operation = 'userById';\n    const query = `query ${operation}($id: ID!) {${operation}(id: $id) {Id Email Name Role DateRegistered LastLogin LoggedIn FailedAttempts Error}}`;\n    const variables = { id: this.id }\n\n    return apiCall(operation, query, variables).then(\n      res => {\n        if (res) {\n          if (res.data) {\n            const r = res.data[operation];\n            this.id = r.Id;\n            this.name = r.Name;\n            this.email = r.Email;\n            this.role = r.Role;\n            this.dateRegistered = r.DateRegistered;\n            this.lastLogin = r.LastLogin;\n            this.loggedIn = r.LoggedIn;\n            this.failedAttempts = r.FAiledAttemps;\n            this.error = r.Error;\n            return res.data[operation];\n          }\n          else if (res.name) return res.message;\n        }\n      },\n      err => { console.error(err)}\n    );\n  };\n\n  getUserByEmail() {\n    const operation = 'userByEmail';\n    const query = `query ${operation}($email: String!) {${operation}(email: $email) {Id, LastLogin, Active}}`;\n    const variables = { email: this.email };\n    \n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => { console.error({err}); }\n    );\n  };\n\n  getAllUsersSansToken() {\n    const operation = 'usersSansToken';\n    const query = `query users {users {Id Error}}`;\n    \n    return apiCall(operation, query).then(\n      res => { return res; },\n      err => { console.error({err}); }\n    );\n  };\n\n  deleteUser(query, ids) {\n    const operation = query;\n    query = `mutation ${operation}($ids: [ID]!) {${operation}(ids: $ids) {Id}}`;\n    const variables = { ids: ids };\n    \n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => { return err; }\n    );\n  };\n\n  updateUser(operation, id, column, value) {\n    const query = `mutation ${operation}($id: ID!, $column: String!, $newValue: String!) {${operation}(id: $id, column: $column, newValue: $newValue) {${column} Error}}`;\n    const variables = {\n      id: id,\n      column: column,\n      newValue: value\n    };\n    \n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => { return err; }\n    );\n  }\n\n  signIn() {\n    const operation = 'signin';\n    const query = `mutation ${operation}($id: ID!, $password: String!) {${operation}(id: $id, password: $password) {Id Name Role RoleId LastLogin Error}}`;\n    const variables = { id: this.id, password: this.password };    \n    \n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => { console.error({err}) }\n    );\n  };\n\n  signUp() {\n    const operation = 'signup';\n    const query = `mutation ${operation}($email: String!, $usersName: String!, $password: String!, $role: Int!) {${operation}(email: $email, usersName: $usersName, password: $password, role: $role) {Id Message Error}}`;\n    const variables = { email: this.email, usersName: this.name, password: this.password, role: this.role };\n    return apiCall(operation, query, variables).then(\n      res => { return res; },\n      err => { console.error({err}); }\n    );\n  };\n\n  signOut() {\n    const operation = 'signout';\n    const mutation = `mutation ${operation} {${operation} {Id, Name, Error}}`;\n    \n    return apiCall(operation, mutation).then(\n      res => { return res },\n      err => { console.error({err}); }\n    );\n  };\n\n  changePassword(firstSignin) {\n    const operation = 'changePassword';\n    const mutation = `mutation ${operation}($id: ID!, $password: String!, $firstSignin: Boolean!) {${operation}(id: $id, password: $password, firstSignin: $firstSignin) {Id Name Role RoleId LastLogin Error}}`;\n    const variables = { id: this.id, password: this.password, firstSignin };\n    \n    return apiCall(operation, mutation, variables).then(\n      res => { return res },\n      err => { console.error({err}); }\n    );\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}